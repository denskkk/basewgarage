# Инструкция по тестированию функции выхода

## Проблема
С профиля невозможно выйти из системы.

## Что было исправлено

### 1. Улучшен обработчик кнопки выхода в dashboard.js
- Добавлена проверка существования элемента
- Добавлен механизм повторного поиска элемента с задержкой
- Добавлены логи для отладки

### 2. Улучшен метод logout в dashboard.js
- Добавлена обработка ошибок (try-catch)
- Добавлена проверка доступности NotificationManager
- Добавлен fallback на стандартный confirm()
- Добавлена принудительная очистка при ошибках

### 3. Улучшен метод logout в auth.js
- Добавлена очистка sessionStorage
- Добавлена обработка ошибок
- Добавлены логи операций

### 4. Добавлены дополнительные средства отладки
- Глобальная функция window.logout() для тестирования
- Временная тестовая кнопка в хедере dashboard.html
- Тестовая страница test-logout.html

## Как тестировать

### Способ 1: Основной выход через профиль
1. Откройте `login.html`
2. Войдите с данными: 
   - Логин: `valerijj.kd`
   - Пароль: `wgarage2025!`
3. В правом верхнем углу нажмите на имя пользователя
4. В выпадающем меню нажмите "Выйти"
5. Подтвердите выход

### Способ 2: Через тестовую кнопку
1. Откройте dashboard.html (после входа)
2. Нажмите красную кнопку с иконкой выхода в хедере
3. Подтвердите выход

### Способ 3: Через консоль браузера
1. Откройте dashboard.html (после входа)
2. Откройте консоль разработчика (F12)
3. Выполните команду: `window.logout()`

### Способ 4: Через тестовую страницу
1. Откройте `test-logout.html`
2. Используйте кнопки для различных тестов
3. Наблюдайте за логами операций

## Возможные проблемы и решения

### Если кнопка не реагирует:
1. Проверьте консоль браузера на наличие ошибок
2. Убедитесь, что все скрипты загружены
3. Используйте `window.logout()` в консоли

### Если NotificationManager недоступен:
- Система автоматически переключится на стандартный confirm()

### Если данные не очищаются:
- Используйте кнопку "Очистить данные пользователя" в test-logout.html

## Дополнительные улучшения

1. **Добавлена отладочная информация** - все операции логируются в консоль
2. **Улучшена обработка ошибок** - система не падает при проблемах
3. **Добавлены fallback-механизмы** - если основной способ не работает, используется альтернативный
4. **Создана тестовая среда** - можно легко протестировать все функции

## Файлы, которые были изменены:
- `js/dashboard.js` - улучшены обработчики событий и метод logout
- `js/auth.js` - улучшен метод logout с обработкой ошибок
- `dashboard.html` - добавлена тестовая кнопка
- `test-logout.html` - создана тестовая страница (НОВЫЙ ФАЙЛ)

После внесения этих изменений функция выхода из системы должна работать корректно через любой из предложенных способов.
